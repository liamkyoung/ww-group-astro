import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as h}from"./index.BdSgv7Tv.js";import{L as N}from"./tslib.es6.BfKwJOR-.js";import{c as F}from"./utils.fNskMoFt.js";import{u as C,G as P,a as T}from"./GoogleMap.Dl-CLBBM.js";import"./index.DEzaVrMe.js";import"./index.BH4_NjwE.js";function E(t){let r=typeof t=="string"?parseFloat(t):t;return isNaN(r)?"":(r=Math.round(r),"$"+r.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}function I(t){if(!t)return"";switch(t){case"All":return"All";case"singleFamily":return"Single-Family";case"multiFamily":return"Multi-Family";case"townhouse":return"Townhouse";case"condo":return"Condominium";case"co-op":return"Co-op";case"apt":return"Apartment";case"mobileHome":return"Mobile Home";case"vacationHome":return"Vacation Home";case"seniorLivingHome":return"Senior Living Home";case"shoppingCenter":return"Shopping Center";case"bizOpportunity":return"Business Opportunity";case"office":return"Office";case"retail":return"Retail Property";case"industrial":return"Industrial Property";case"mixedUse":return"Mixed Use";case"hotel":return"Hotel";case"motel":return"Motel";case"restaurant":return"Restaurant";case"healthcareFacility":return"Healthcare Facility";case"storageUnit":return"Storage Unit";case"vacantLand":return"Vacant Land";case"agriculturalLand":return"Agricultiral Land";case"timberland":return"Timberland";case"ranchLand":return"Ranch Land";case"recreationalLand":return"Recreational Land";case"developmentLand":return"Development Land";case"religion":return"Religious Building";case"school":return"School";case"university":return"University";case"governmentBuilding":return"Government Building";case"cemetery":return"Cemetery";case"airport":return"Airport";case"utility":return"Utility";case"reit":return"Real Estate Investment Trust (REIT)";case"rentalProperty":return"Rental Property";case"fixAndFlip":return"Fix-and-Flip Property"}return"N/A"}function B(t){if(!t)return"";switch(t){case"forSale":return"For Sale";case"lease":return"Lease";case"forSaleLease":return"For Sale / Lease";default:return"N/A"}}function $(t){if(!t)return"";switch(t){case"oneTime":return"";case"dollarPerSqPerYear":return"/ sqft / yr";case"monthly":return"/ month";case"yearly":return"/ yr";default:return"N/A"}}function S({className:t,...r}){return e.jsx("div",{"data-slot":"skeleton",className:F("bg-accent animate-pulse rounded-md",t),...r})}const q=({title:t,doc:r,className:l,isLoading:o=!1})=>{if(o||!r)return e.jsxs("div",{className:`flex flex-col space-y-3 ${l??""}`,children:[e.jsx(S,{className:"size-64 rounded-md"}),e.jsx("div",{className:"space-y-2",children:e.jsx(S,{className:"h-4 w-[250px]"})})]});const{slug:d,title:i,address:p,sqFt:g,sqFtLand:y,sqFtLot:s,bedCount:x,bathroomCount:f,coverImage:v,price:j,isPriceNegotiable:b,listingType:n,paymentFrequency:m}=r,a=t||i,w=d?`${N.relLink}/${d}`:N.relLink,c=[g!=null?`${g} sq ft`:"",s!=null?`${s} acres`:"",y!=null?`${y} sq ft land`:"",x!=null?`${x} bed`:"",f!=null?`${f} bath`:""].filter(A=>A!=="").slice(0,3),u=b?"Negotiable":j!=null?E(j.toString()):void 0,L=v&&typeof v!="string";return e.jsxs("div",{className:l,children:[e.jsx("a",{href:w,children:e.jsxs("div",{className:"relative",children:[(u||n)&&e.jsxs("div",{className:"bg-white absolute -bottom-1 -left-1 p-3 rounded-md",children:[u&&e.jsxs("span",{className:"text-wwRed font-bold",children:[u," ",$(m)]}),n&&e.jsxs("span",{className:"text-wwBlack font-medium",children:[" ","| ",B(n)]})]}),!L&&e.jsx("div",{className:"mx-auto flex h-64 w-full items-center justify-center rounded-md bg-gray-100 text-sm text-gray-500",children:"No image available"}),L&&e.jsx("img",{className:"mx-auto rounded-md h-64 object-cover",src:C(v).url()})]})}),e.jsxs("div",{children:[a&&e.jsx("h5",{className:"my-2 text-center lg:text-left",children:a}),e.jsx("div",{className:"mx-auto",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[p&&e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-5 text-wwRed",children:e.jsx("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm font-bold",children:p})]}),c&&c.length>0&&e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-5 text-wwRed",children:e.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm font-bold",children:c.map((A,M)=>A+(M!==c.length-1?", ":""))})]})]})})]})]})},k=[{name:"Most Expensive",sort:"mostExpensive"},{name:"Least Expensive",sort:"leastExpensive"},{name:"Newest",sort:"newest"}],G=({sortType:t,setSortType:r,agents:l,onToggleAgent:o,propertyTypes:d,onTogglePropertyType:i})=>{const p=s=>{const x=s.target.value;r(x)},g=Array.from(l.entries()).map(([s,x])=>({label:s,value:s,selected:x})),y=Array.from(d.entries()).map(([s,x])=>({label:I(s),value:s,selected:x}));return e.jsx("div",{className:"mb-6 border-t border-gray-200 py-4",children:e.jsxs("div",{className:"flex flex-col gap-4 items-start sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),e.jsx("select",{className:"text-sm rounded-md border border-gray-300 bg-white px-2 py-1 focus:border-wwRed focus:outline-none focus:ring-1 focus:ring-wwRed",value:t,onChange:p,children:k.map(s=>e.jsx("option",{value:s.sort,children:s.name},s.sort))})]}),e.jsxs("div",{className:"flex flex-wrap gap-6 text-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Agent:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(s=>e.jsx("button",{type:"button",onClick:()=>o(s.value),className:"rounded-full border px-3 py-1 transition text-xs sm:text-sm "+(s.selected?"border-wwRed bg-wwRed text-white":"border-gray-300 bg-white text-gray-700 hover:border-wwRed"),children:s.label},s.value))})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Property Type:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(s=>e.jsx("button",{type:"button",onClick:()=>i(s.value),className:"rounded-full border px-3 py-1 transition text-xs sm:text-sm "+(s.selected?"border-wwRed bg-wwRed text-white":"border-gray-300 bg-white text-gray-700 hover:border-wwRed"),children:s.label},s.value))})]})]})]})})};function H(t){return t.map(r=>({name:r.title,coords:{lat:r.latitude||T.mapCenter.lat,lng:r.longitude||T.mapCenter.lng},slug:r.slug,coverImg:r.coverImage,address:r.address,price:r.price||0}))}function R(t,r,l){return t.price===null&&r.price===null?0:t.price===null?-1:r.price===null?1:l(t,r)}function O(t,r){const l=[...t];switch(r){case"newest":return l.sort((o,d)=>new Date(d.updatedAt).getTime()-new Date(o.updatedAt).getTime());case"leastExpensive":return l.sort((o,d)=>R(o,d,(i,p)=>(i.price??0)-(p.price??0)));case"mostExpensive":return l.sort((o,d)=>R(o,d,(i,p)=>(p.price??0)-(i.price??0)));default:return l}}function U(t,r){return r.get("All")?t:t.filter(l=>{if(!l.agents||l.agents.length===0)return!1;const o=[...r.entries()].filter(([,i])=>i).map(([i])=>i);return l.agents.map(i=>i.title).some(i=>o.includes(i))})}function D(t,r){return r.get("All")?t:t.filter(l=>l.propertyType?!!r.get(l.propertyType):!1)}const K=({listings:t,displayHeader:r="yes",isLoading:l=!1})=>{const o=h.useMemo(()=>Array.from(new Set(t.flatMap(n=>n.agents?.map(m=>m.title).filter(Boolean)??[]))),[t]),d=h.useMemo(()=>Array.from(new Set(t.map(n=>n.propertyType))),[t]),[i,p]=h.useState("mostExpensive"),[g,y]=h.useState(()=>new Map([["All",!0],...o.map(n=>[n,!1])])),[s,x]=h.useState(()=>new Map([["All",!0],...d.map(n=>[n,!1])])),f=h.useMemo(()=>{const n=O(t,i),m=U(n,g);return D(m,s)},[t,i,g,s]),v=h.useMemo(()=>H(f),[f]),j=n=>{y(m=>{const a=new Map(m);return n==="All"?a.forEach((w,c)=>a.set(c,c==="All")):(a.set("All",!1),a.set(n,!a.get(n)),[...a.entries()].some(([c,u])=>c!=="All"&&u)||a.forEach((c,u)=>a.set(u,u==="All"))),a})},b=n=>{x(m=>{const a=new Map(m);return n==="All"?a.forEach((w,c)=>a.set(c,c==="All")):(a.set("All",!1),a.set(n,!a.get(n)),[...a.entries()].some(([c,u])=>c!=="All"&&u)||a.forEach((c,u)=>a.set(u,u==="All"))),a})};return e.jsxs("div",{className:"global-margin-x global-margin-y overflow-x-hidden",children:[r==="yes"?e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 lg:gap-0 items-center justify-between mb-16",children:[e.jsx("h2",{children:"Current Listings"}),e.jsx("a",{href:N.relLink,className:"btn-primary hidden lg:block",children:"VIEW ALL LISTINGS"})]}):e.jsx("div",{className:"mb-16",children:e.jsx("h2",{children:"Our Listings"})}),e.jsx(G,{sortType:i,setSortType:p,agents:g,onToggleAgent:j,propertyTypes:s,onTogglePropertyType:b}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8 xl:gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 justify-items-center gap-8 overflow-y-scroll h-[44rem]",children:[f.map((n,m)=>e.jsx("div",{className:"w-full",children:e.jsx(q,{doc:n,isLoading:l})},n._id||`${n.title}-${m}`)),f.length===0&&e.jsx("p",{className:"text-center col-span-full py-8 font-semibold",children:"No listings match the selected filters."})]}),e.jsx("div",{children:e.jsx(P,{pins:v,pinType:"listing"})})]}),r==="yes"&&e.jsx("div",{className:"lg:hidden flex flex-col gap-8 lg:gap-0 items-center my-8",children:e.jsx("a",{href:N.relLink,className:"btn-primary",children:"VIEW ALL LISTINGS"})})]})};export{K as ListingGallery};

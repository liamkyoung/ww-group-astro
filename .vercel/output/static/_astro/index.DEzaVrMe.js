import{g as M}from"./index.BdSgv7Tv.js";import{r as A}from"./index.BH4_NjwE.js";var G=A();const Ze=M(G);typeof process<"u"&&Object.prototype.toString.call(process);const H=new TextDecoder,o=(e,t=0,n=e.length)=>H.decode(e.slice(t,n)),f=(e,t=0,n=e.length)=>e.slice(t,n).reduce((c,i)=>c+("0"+i.toString(16)).slice(-2),""),T=(e,t=0)=>{const n=e[t]+e[t+1]*256;return n|(n&2**15)*131070},u=(e,t=0)=>e[t]*2**8+e[t+1],a=(e,t=0)=>e[t]+e[t+1]*2**8,x=(e,t=0)=>e[t]+e[t+1]*2**8+e[t+2]*2**16,O=(e,t=0)=>e[t]+e[t+1]*2**8+e[t+2]*2**16+(e[t+3]<<24),s=(e,t=0)=>e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3],g=(e,t=0)=>e[t]+e[t+1]*2**8+e[t+2]*2**16+e[t+3]*2**24,p={readUInt16BE:u,readUInt16LE:a,readUInt32BE:s,readUInt32LE:g};function h(e,t,n,c){n=n||0;const i=c?"BE":"LE",r="readUInt"+t+i;return p[r](e,n)}function Y(e,t){if(e.length-t<4)return;const n=s(e,t);if(!(e.length-t<n))return{name:o(e,4+t,8+t),offset:t,size:n}}function d(e,t,n){for(;n<e.length;){const c=Y(e,n);if(!c)break;if(c.name===t)return c;n+=c.size}}const z={validate:e=>o(e,0,2)==="BM",calculate:e=>({height:Math.abs(O(e,22)),width:g(e,18)})},U=1,j=6,V=16;function y(e,t){const n=e[t];return n===0?256:n}function P(e,t){const n=j+t*V;return{height:y(e,n+1),width:y(e,n)}}const L={validate(e){const t=a(e,0),n=a(e,4);return t!==0||n===0?!1:a(e,2)===U},calculate(e){const t=a(e,4),n=P(e,0);if(t===1)return n;const c=[n];for(let i=1;i<t;i+=1)c.push(P(e,i));return{height:n.height,images:c,width:n.width}}},X=2,J={validate(e){const t=a(e,0),n=a(e,4);return t!==0||n===0?!1:a(e,2)===X},calculate:e=>L.calculate(e)},Z={validate:e=>g(e,0)===542327876,calculate:e=>({height:g(e,12),width:g(e,16)})},K=/^GIF8[79]a/,W={validate:e=>K.test(o(e,0,6)),calculate:e=>({height:a(e,8),width:a(e,6)})},R={avif:"avif",avis:"avif",mif1:"heif",msf1:"heif",heic:"heic",heix:"heic",hevc:"heic",hevx:"heic"};function $(e,t,n){let c={};for(let i=t;i<=n;i+=4){const r=o(e,i,i+4);r in R&&(c[r]=1)}if("avif"in c||"avis"in c)return"avif";if("heic"in c||"heix"in c||"hevc"in c||"hevx"in c)return"heic";if("mif1"in c||"msf1"in c)return"heif"}const q={validate(e){const t=o(e,4,8),n=o(e,8,12);return t==="ftyp"&&n in R},calculate(e){const t=d(e,"meta",0),n=t&&d(e,"iprp",t.offset+12),c=n&&d(e,"ipco",n.offset+8),i=c&&d(e,"ispe",c.offset+8);if(i)return{height:s(e,i.offset+16),width:s(e,i.offset+12),type:$(e,8,t.offset)};throw new TypeError("Invalid HEIF, no size found")}},Q=8,ee=4,te=4,ne={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function N(e,t){const n=t+te;return[o(e,t,n),s(e,n)]}function S(e){const t=ne[e];return{width:t,height:t,type:e}}const ce={validate:e=>o(e,0,4)==="icns",calculate(e){const t=e.length,n=s(e,ee);let c=Q,i=N(e,c),r=S(i[0]);if(c+=i[1],c===n)return r;const l={height:r.height,images:[r],width:r.width};for(;c<n&&c<t;)i=N(e,c),r=S(i[0]),c+=i[1],l.images.push(r);return l}},ie={validate:e=>f(e,0,4)==="ff4fff51",calculate:e=>({height:s(e,12),width:s(e,8)})},re={validate(e){if(s(e,4)!==1783636e3||s(e,0)<1)return!1;const t=d(e,"ftyp",0);return t?s(e,t.offset+4)===1718909296:!1},calculate(e){const t=d(e,"jp2h",0),n=t&&d(e,"ihdr",t.offset+8);if(n)return{height:s(e,n.offset+8),width:s(e,n.offset+12)};throw new TypeError("Unsupported JPEG 2000 format")}},oe="45786966",se=2,v=6,ae=2,he="4d4d",le="4949",_=12,de=2;function ge(e){return f(e,2,6)===oe}function fe(e,t){return{height:u(e,t),width:u(e,t+2)}}function we(e,t){const c=v+8,i=h(e,16,c,t);for(let r=0;r<i;r++){const l=c+de+r*_,k=l+_;if(l>e.length)return;const w=e.slice(l,k);if(h(w,16,0,t)===274)return h(w,16,2,t)!==3||h(w,32,4,t)!==1?void 0:h(w,16,8,t)}}function me(e,t){const n=e.slice(se,t),c=f(n,v,v+ae),i=c===he;if(i||c===le)return we(n,i)}function ue(e,t){if(t>e.length)throw new TypeError("Corrupt JPG, exceeded buffer limits")}const Ee={validate:e=>f(e,0,2)==="ffd8",calculate(e){e=e.slice(4);let t,n;for(;e.length;){const c=u(e,0);if(e[c]!==255){e=e.slice(c);continue}if(ge(e)&&(t=me(e,c)),ue(e,c),n=e[c+1],n===192||n===193||n===194){const i=fe(e,c+5);return t?{height:i.height,orientation:t,width:i.width}:i}e=e.slice(c+2)}throw new TypeError("Invalid JPG, no size found")}},Ie={validate:e=>{const t=o(e,1,7);return["KTX 11","KTX 20"].includes(t)},calculate:e=>{const t=e[5]===49?"ktx":"ktx2",n=t==="ktx"?36:20;return{height:g(e,n+4),width:g(e,n),type:t}}},ve=`PNG\r

`,Te="IHDR",B="CgBI",xe={validate(e){if(ve===o(e,1,8)){let t=o(e,12,16);if(t===B&&(t=o(e,28,32)),t!==Te)throw new TypeError("Invalid PNG");return!0}return!1},calculate(e){return o(e,12,16)===B?{height:s(e,36),width:s(e,32)}:{height:s(e,20),width:s(e,16)}}},b={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},F={default:e=>{let t=[];for(;e.length>0;){const n=e.shift();if(n[0]!=="#"){t=n.split(" ");break}}if(t.length===2)return{height:parseInt(t[1],10),width:parseInt(t[0],10)};throw new TypeError("Invalid PNM")},pam:e=>{const t={};for(;e.length>0;){const n=e.shift();if(n.length>16||n.charCodeAt(0)>128)continue;const[c,i]=n.split(" ");if(c&&i&&(t[c.toLowerCase()]=parseInt(i,10)),t.height&&t.width)break}if(t.height&&t.width)return{height:t.height,width:t.width};throw new TypeError("Invalid PAM")}},ye={validate:e=>o(e,0,2)in b,calculate(e){const t=o(e,0,2),n=b[t],c=o(e,3).split(/[\r\n]+/);return(F[n]||F.default)(c)}},Pe={validate:e=>o(e,0,4)==="8BPS",calculate:e=>({height:s(e,14),width:s(e,18)})},C=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,m={height:/\sheight=(['"])([^%]+?)\1/,root:C,viewbox:/\sviewBox=(['"])(.+?)\1/i,width:/\swidth=(['"])([^%]+?)\1/},I=2.54,D={in:96,cm:96/I,em:16,ex:8,m:96/I*100,mm:96/I/10,pc:96/72/12,pt:96/72,px:1},Ne=new RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(D).join("|")})?$`);function E(e){const t=Ne.exec(e);if(t)return Math.round(Number(t[1])*(D[t[2]]||1))}function Se(e){const t=e.split(" ");return{height:E(t[3]),width:E(t[2])}}function _e(e){const t=m.width.exec(e),n=m.height.exec(e),c=m.viewbox.exec(e);return{height:n&&E(n[2]),viewbox:c&&Se(c[2]),width:t&&E(t[2])}}function Be(e){return{height:e.height,width:e.width}}function be(e,t){const n=t.width/t.height;return e.width?{height:Math.floor(e.width/n),width:e.width}:e.height?{height:e.height,width:Math.floor(e.height*n)}:{height:t.height,width:t.width}}const Fe={validate:e=>C.test(o(e,0,1e3)),calculate(e){const t=m.root.exec(o(e));if(t){const n=_e(t[0]);if(n.width&&n.height)return Be(n);if(n.viewbox)return be(n,n.viewbox)}throw new TypeError("Invalid SVG")}},Le={validate(e){return a(e,0)===0&&a(e,4)===0},calculate(e){return{height:a(e,14),width:a(e,12)}}};function Re(e,t){const n=h(e,32,4,t);return e.slice(n+2)}function Ce(e,t){const n=h(e,16,8,t);return(h(e,16,10,t)<<16)+n}function De(e){if(e.length>24)return e.slice(12)}function ke(e,t){const n={};let c=e;for(;c&&c.length;){const i=h(c,16,0,t),r=h(c,16,2,t),l=h(c,32,4,t);if(i===0)break;l===1&&(r===3||r===4)&&(n[i]=Ce(c,t)),c=De(c)}return n}function Me(e){const t=o(e,0,2);if(t==="II")return"LE";if(t==="MM")return"BE"}const Ae=["49492a00","4d4d002a"],Ge={validate:e=>Ae.includes(f(e,0,4)),calculate(e){const t=Me(e)==="BE",n=Re(e,t),c=ke(n,t),i=c[256],r=c[257];if(!i||!r)throw new TypeError("Invalid Tiff. Missing tags");return{height:r,width:i}}};function He(e){return{height:1+x(e,7),width:1+x(e,4)}}function Oe(e){return{height:1+((e[4]&15)<<10|e[3]<<2|(e[2]&192)>>6),width:1+((e[2]&63)<<8|e[1])}}function pe(e){return{height:T(e,8)&16383,width:T(e,6)&16383}}const Ye={validate(e){const t=o(e,0,4)==="RIFF",n=o(e,8,12)==="WEBP",c=o(e,12,15)==="VP8";return t&&n&&c},calculate(e){const t=o(e,12,16);if(e=e.slice(20,30),t==="VP8X"){const c=e[0],i=(c&192)===0,r=(c&1)===0;if(i&&r)return He(e);throw new TypeError("Invalid WebP")}if(t==="VP8 "&&e[0]!==47)return pe(e);const n=f(e,3,6);if(t==="VP8L"&&n!=="9d012a")return Oe(e);throw new TypeError("Invalid WebP")}},ze=new Map([["bmp",z],["cur",J],["dds",Z],["gif",W],["heif",q],["icns",ce],["ico",L],["j2c",ie],["jp2",re],["jpg",Ee],["ktx",Ie],["png",xe],["pnm",ye],["psd",Pe],["svg",Fe],["tga",Le],["tiff",Ge],["webp",Ye]]);Array.from(ze.keys());export{Ze as R,G as r};

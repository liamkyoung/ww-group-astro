---
import { urlFor } from "@/lib/sanityImage";
import type { SanityImage } from "@/lib/schemas";

interface Props {
  name: string;
  jobTitle: string;
  shortDescription: string;
  yearsOfExperience?: number;
  strength?: string;
  fullBodyImage?: SanityImage | null;
}

const {
  name,
  jobTitle,
  shortDescription,
  yearsOfExperience,
  strength,
  fullBodyImage,
} = Astro.props as Props;

const imageUrl = fullBodyImage
  ? urlFor(fullBodyImage).width(600).height(900).url()
  : undefined;
---

<div
  class="flex flex-col items-center justify-center xl:flex-row xl:justify-between"
>
  <div class="block xl:flex items-center gap-8">
    <!-- Back link (shown on desktop only, like original) -->
    <a href="/team" class="xl:hidden block">
      <h6 class="text-gray-800">Team /</h6>
    </a>

    <!-- Mobile image -->
    <div class="xl:hidden block">
      {
        imageUrl && (
          <img
            src={imageUrl}
            alt={name}
            class="w-full max-w-96 object-contain mx-auto shadow-md"
            loading="eager"
          />
        )
      }
    </div>

    <div>
      <!-- Back link above name for desktop -->
      <a href="/team" class="hidden xl:block">
        <h6 class="text-gray-800">Team /</h6>
      </a>

      <h1 class="mb-2 mt-6 text-center xl:text-left">{name}</h1>
      <h6 class="mb-2 text-center xl:text-left">{jobTitle}</h6>

      <p class="text-center xl:text-left xl:w-3/4 w-full leading-8">
        {shortDescription}
      </p>

      {
        (yearsOfExperience || strength) && (
          <p class="mt-4 text-sm text-gray-600 text-center xl:text-left">
            {yearsOfExperience && `${yearsOfExperience} years of experience`}
            {yearsOfExperience && strength && " Â· "}
            {strength && strength}
          </p>
        )
      }
    </div>
  </div>

  <!-- Desktop image -->
  <div class="hidden xl:block">
    {
      imageUrl && (
        <img
          src={imageUrl}
          alt={name}
          class="xl:min-w-96 max-w-[20rem] shadow-md object-contain min-h-96"
          loading="eager"
        />
      )
    }
  </div>
</div>
